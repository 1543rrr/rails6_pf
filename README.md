# README

This README would normally document whatever steps are necessary to get the
application up and running.

Things you may want to cover:

* Ruby version

* System dependencies

* Configuration

* Database creation

* Database initialization

* How to run the test suite

* Services (job queues, cache servers, search engines, etc.)

* Deployment instructions

* ...

# README

### アプリ名
そうだ！クラシック音楽祭へ行こう！

### 概要
クラシック音楽祭に行きたい方向けの情報共有掲示板です。クラシック愛好家の方は様々なパターンに分かれると思います。①クラシック音楽は音源で聴いたことがある&メディアで演奏会を視聴したことがあるが、実際のクラシック音楽祭やクラシック演奏会にはまだ行ったことがない 、 ② クラシック音楽は音源で聴いたこともある&メディアで演奏会を視聴したこともある、実際のクラシック音楽祭に何回も行ったことがある常連の方（自分の行ったクラシック音楽祭を皆に共有したい方） 、③クラシック音楽になんとなく興味のある方 、 ④クラシック音楽系の掲示板をただ閲覧しにきた方 をターゲットに制作しました。
私には古くからの友人がおりまして、その友人はある悩みを抱いていました。「最近クラシック音楽に目覚め、メディアや音源でクラシック演奏を聴いたり、視聴している。しかし、クラシック音楽というと敷居が高く、お堅いイメージだからクラシック音楽祭やクラシック演奏会に行きにくい、雰囲気が掴めず分からない、どんなクラシック音楽祭やクラシック演奏会があるのか分からない。」という悩みを抱えておりました。クラシック音楽祭は特定の演奏家や特定の音楽だけではなく、国内海外含む様々な演奏家や音楽（ピアノソロやオーケストラ、室内楽）を聴くことが可能な為、クラシック音楽演奏会掲示板ではなく、クラシック音楽祭掲示板をコンセプトにしました。「音楽祭」の方が、敷居が高くなく、雰囲気も掴めやすい、そして行きやすいと思います。クラシック生演奏初心者の友人にはまずクラシック音楽祭デビューからお試しして欲しいと考えました。ターゲットの③の方と④の方専用に手軽に掲示板を閲覧して頂きたい、なんとなくから少しづつでもクラシック音楽に興味を持って欲しい！と考えている為、ゲストログインボタンを設置しました。この掲示板をきっかけにクラシック音楽に興味のない方やクラシック音楽がなんとなく気になる！演奏会もなんとなく気になる！という方が増えて欲しい！という強い願いもあります！

このアプリはRuby、Ruby on Rails、 Sass、MySQLで書かれています。
【機能】　ログイン/ログアウト機能、新規登録/企業担当者様用閲覧ログイン、投稿一覧ページ、写真投稿機能、投稿削除編集機能、コメント機能、ユーザーマイページ(投稿一覧、プロフィール）、ユーザープロフィール編集機能
、投稿へのいいね機能、キーワード検索機能があります。まずは古くからの大事な友人の悩みを最優先に解決したい為、最低限の実装しかしておりません。友人の意見に合わせて制作しました。今後、その友人から「この機能欲しい！」おt要望があったら、随時追加実装をしていく予定です。
現在、チャット機能を実装中です。チャット機能を実装している理由は、クラシック音楽祭へ一緒に行く仲間や趣味仲間を作りたい！という方も掲示板が使える様にしたいからです。クラシックを通じて友人や横の繋がりを是非作って頂きたいです！


### 本番環境
※ゲストログイン（担当者様用閲覧ログイン）ボタン機能がある為、ログイン情報（テスト用）や新規登録の必要はありません。


### DEMO

##トップページ
https://gyazo.com/c7a42bb0b3ea3b559d7969722735c0c7
サイトを開いたら一目でクラシック音楽祭情報共有掲示板だと分かる様に、トップページに投稿が一覧表示される仕様にしました。ヘッダーの一番左にトップページに戻る「クラシック音楽祭」というボタンを設置しました。目につく場所に掲示板テーマのボタン「クラシック音楽祭」ボタンを設置することによって、サイトを開いたらすぐ、この掲示板の内容が分かる様にしました。新規登録していない、ログインしていない、ゲストログインしていない場合はトップページしか表示されない仕様にしました。投稿された画像をクリックしたら、新規登録画面に飛ぶ仕様です。

##新規登録やログインしないと投稿一覧ページしか閲覧出来ない仕様
https://gyazo.com/1391d7130d59152a6a9ea7fe2976fd97
セキュリティ対策として新規登録やログイン、ゲストログインをしないとコメントが出来ない仕様にしました。併せていいねも投稿も出来ない仕様にしております。

##新規登録画面
https://gyazo.com/565ec24938443dd55dc93f30a790b00b
名前、メールアドレス、パスワードを入力しないと新規登録出来ません。この掲示板は閲覧のみの方もいらっしゃると思いますし、とりあえず新規登録だけして手軽に掲示板を覗きに行きたいという方もいらっしゃると思うので、最低限の必要な個人情報入力しか出来ない仕様にしました。

##ログイン/ゲストログイン/ログアウト機能
https://gyazo.com/a309328118d7b1964fc8af4ccd94369f
https://gyazo.com/3b11512a91d460753bdd6f4ba96d2944
企業担当者様や新規登録したくなく手軽に閲覧だけしたい方がワンクリック一つでアプリを操作出来る様に、ゲストログインボタンを設置しました。ログアウトもワンクリックひとつで簡単に出来ます。また、一度ログアウトした際は分かりやすい様に「ログアウトしました。」というフラッシュメッセージが表示される仕様にしました。

##マイページ
https://gyazo.com/1ba68758f2d765ff709049d93cf054fe
ヘッダーのマイページボタンを押すと、自分のプロフィールと自分が投稿したものが一覧で見れます。ヘッダーをすっきりさせてシンプルでコンパクトなデザインにしたかった為、マイページに自分のプロフィールと自分の投稿一覧が1ページに表示される仕様にしました。セキュリティ面からゲストユーザーさんはプロフィール編集が出来ない様にしたかった為、ゲストユーザーさんにはプロフィール編集ボタンは表示されません。

##プロフィール編集画面
https://gyazo.com/e28c6ba4a9afdc080506d16b627c716b
ヘッダーのマイページを押した後、プロフィール編集画面に飛びます。編集をした後、更新ボタンを押せば、プロフィールが編集されます。

##マイページ（詳細画面）からの投稿編集/削除
https://gyazo.com/042eb6c6bc069bbe610379d381d89799
https://gyazo.com/22edf23d3ced6b51f5fb81105cb7880e
ヘッダーのマイページボタンを押すとマイページへ飛び、自分の投稿を編集、削除が出来る仕様にしました。投稿がメインである為、編集ボタンや削除ボタンは薄めの淡い色を用いてあまり悪目立ちしないデザインにしました。

##投稿詳細画面
https://gyazo.com/0c50491a7b808bbc3d58a8f4492a03cd
https://gyazo.com/4c67e35f0cc2d5297c1a4cdb07f2c7e1
投稿一覧ページの他ユーザーの投稿写真をクリックすると、そのユーザーの投稿詳細ページに飛び、投稿者の名前をクリックするとその方の投稿一覧ページに飛ぶ仕様にしました。また、過去の投稿にもいいねが付けれる仕様にしました。この投稿をしたユーザーの過去の投稿が見れることにより、どんな音楽祭に訪れることが多いのかや音楽祭常連者ということが分かります。常連者さんとコンタクトを取って詳しいお話を聞きたい！という意味で実装中のチャット機能にも活きてくる様に、投稿ユーザーの名前から投稿一覧が見れる仕様にしました。投稿詳細ページからヘッダーの「クラシック音楽祭」というボタンを押すと、トップページに飛ぶ仕様にしました。

##投稿機能
https://gyazo.com/79abdc713f5d8e3cd0654186b1760fa2
https://gyazo.com/ab0ae93942ff9215e1ca616868cbf6a7
画像付きの投稿が出来ます。また、自分の投稿にはいいねが一回出来ます。また、画像を選択しないと投稿が出来ません。画像を投稿することにより、実際に行ったことがある履歴や雰囲気が掴める様になります。より確かな情報を提供することがクラシック音楽祭初心者の方の不安を和らげることにつながると考え、画像は絶対に選択しないと投稿が出来ないという仕様にしました。

##いいね機能
https://gyazo.com/45d0fb9d5ac8ac630c5861a95a4cd40b
https://gyazo.com/3cd6d324c830e735fe8eb97ade9af93d
投稿一覧画面から投稿にいいねが出来る仕様にしました。また、いいねを取り消すことも出来ます。そして、投稿詳細ページからもいいねが出来る、いいねが取り消せる仕様にしました。ただし、N＋1問題がある為、１人１回しかいいねは出来ません。いいねは皆からの評価です。自分の投稿にいいねがつくと嬉しいと思った為、いいね機能も実装しました。

##コメント機能
https://gyazo.com/df3d2abea7ebc6dc98f685d75c1d971c
https://gyazo.com/a8467097ccfcda5c61eb26be763c4070
投稿詳細画面から投稿にコメントが出来る仕様にしました。コメントした方の名前も表示されます。また、自分のコメントの場合、コメント横の自分の名前をクリックするとその名前からマイページに飛ぶことも出来ます。他ユーザーの投稿にコメント横の名前をクリックした場合は、そのユーザーのマイページ（投稿詳細ページ）には飛びます。しかし、プライバシー面を配慮している為、プロフィールは表されず、投稿一覧のみが表示されます。誰が自分の投稿にコメントをしたのか気になりますよね。その為、コメントした方の投稿一覧が見れるように、コメントした方の投稿一覧ページに飛ぶ仕様にしました。良いコメントをされたら嬉しいと思いますし、コメントしてくれた方は過去にどんなクラシック音楽祭に行ったのか？また、その情報からコンタクトを取ってみたい！と思うからです。

##検索機能
https://gyazo.com/0438786b40b1bce568946f42dc09e61c
https://gyazo.com/c361cd59767afa13876159c9ae5376e4
キーワードを検索窓に打ち込んで「検索」という検索窓よこにあるボタンを押すと、キーワードが含まれた投稿を表示してくれます。また、新規登録、ログイン、ゲストログインしていないと、検索が出来ない仕様にしました。


###開発環境

Ruby 2.6.5
Rails 6.1.3.2
MySQL 5.7.34


###工夫したポイント

・コメント欄からコメントユーザーの投稿一覧画面に飛ぶように実装
・投稿詳細に投稿者の名前を表示し、その投稿者の投稿一覧画面に飛ぶように実装
・キーワード検索でキーワードが含まれる検索を表示する
・気に入った投稿や良いなと思った投稿にはいいねをつけることができる
・シンプルかつ使いやすいようにヘッダーにボタンを集約させた
・ボタンをクリックすると色が変わるデザインにした


###使用技術(開発環境)
##バックエンド

Ruby、Ruby on Rails

##フロントエンド

Haml、Sass、JavaScript、Ajax

##データベース

MySQL

##インフラ

AWS(S3)、Heroku

##ソース管理

GitHub、GitHubDesktop

##エディタ

VSCode


###課題点
・ユーザー目線のデザインや実際に運用出来るアプリではないこと
・コメントを編集削除出来ない点
・ゲストログインからログインしたゲストユーザーがログインした際、ゲストさんという表示になってしまうこと


###今後実装したい機能
・チャット機能(現在実装中です)
・いいね一覧表示
・クラシック音楽祭に持っていく持ち物や服装（この機能により、クラシック音楽祭デビューが成功するかな、と思います！）
・インフラ面でAWSにデプロイ


# テーブル設計

## users テーブル

| Column    | Type   | Options     |
| --------  | ------ | ----------- |
| email     | string | null: false |
| password  | string | null: false |
| nickname  | string | null: false |


### Association

- has_many :posts
- has_many :comments
- has_many :likes

## posts テーブル

| Column | Type          | Options     |
| ------ | --------------| ----------- |
| classic_festival_name  | string        | null: false |
| user   | references    | 
|impressions(感想)|text|null: false|

### Association

- belongs_to :user
- has_many :comments 
- has_many :likes

## comments テーブル

| Column   | Type       | Options                        |
| ---------| ---------- | ------------------------------ |
| text     | text       | null: false, foreign_key: true |
| user     | references | 
| post     | references |

### Association

- belongs_to :user
- belongs_to :post

## likes table
| Column   | Type       | Options                        |
| ---------| ---------- | ------------------------------ |
| user     | references | 
| post     | references |

### Association

- belongs_to :user
- belongs_to :post

